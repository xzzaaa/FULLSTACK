
$font-primary: 'Source Code Pro', Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; 
$font-secondary: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;

$font-secondary: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;

$color-bg-deep: #0a0f18; 
$color-bg-surface: #111827;
$color-bg-surface-alt: #1f2937; 
$color-border: #374151;

$color-text-primary: #e5e7eb; 
$color-text-secondary: #9ca3af;
$color-text-heading: #f9fafb;

$color-accent-green: #34d399; 
$color-accent-green-hover: #6ee7b7; 
$color-accent-secondary: #6366f1; 
$color-accent-secondary-hover: #818cf8;
$color-text-muted:$color-accent-green;

$color-success: $color-accent-green;
$color-danger: #f87171; 

$radius-base: 4px;
$radius-lg: 6px;

$shadow-glow-green: 0 0 8px 0 rgba($color-accent-green, 0.4);
$shadow-glow-focus: 0 0 0 3px rgba($color-accent-green, 0.3);
$shadow-card: 0 2px 8px -1px rgba(0, 0, 0, 0.3), 0 1px 4px -2px rgba(0, 0, 0, 0.2);

$transition-duration: 0.2s;
$transition-timing: ease-out;
$transition-base: all $transition-duration $transition-timing;

$content-max-width: 800px;
$spacing-unit: 1rem;

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; font-size: 16px; }
body {
  font-family: $font-primary;
  background-color: $color-bg-deep;
  color: $color-text-primary;
  line-height: 1.7;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  padding-top: 65px;
  overflow-x: hidden;
}

.main-content, .post-container, .form-container > .login-container, .contactForm, .intro-page {
  max-width: $content-max-width;
  margin: $spacing-unit * 2.5 auto;
  padding: 0 $spacing-unit * 1.5;
}
@media (max-width: 768px) {
  .main-content, .post-container, .form-container > .login-container, .contactForm, .intro-page {
     padding: 0 $spacing-unit;
     margin-top: $spacing-unit * 1.5; margin-bottom: $spacing-unit * 1.5;
  }
}

h1, h2, h3, h4, h5, h6 {
  font-family: $font-primary;
  color: $color-text-heading;
  margin-bottom: $spacing-unit * 1;
  line-height: 1.3;
  font-weight: 600;
}
h1 { font-size: 2.4rem; font-weight: 700; margin-top: $spacing-unit * 1.5; border-bottom: 1px dashed $color-border; padding-bottom: $spacing-unit*0.5; }
h2 { font-size: 1.8rem; color: $color-accent-green; }
h3 { font-size: 1.3rem; font-weight: 500; color: lighten($color-accent-green, 10%); }
h4 { font-size: 1.1rem; font-weight: 500; color: $color-text-secondary; }

p { margin-bottom: $spacing-unit * 1.2; color: $color-text-secondary; font-family: $font-secondary; }
a { color: $color-accent-green; text-decoration: none; transition: $transition-base; &:hover { color: $color-accent-green-hover; text-decoration: none; filter: brightness(1.1); } }
strong { font-weight: 600; color: $color-text-heading; }
small, .post-meta, .comment-time { font-size: 0.85em; color: $color-text-muted; display: block; font-family: $font-primary; }
hr { border: 0; border-top: 1px dashed $color-border; margin: $spacing-unit * 2.5 0; opacity: 0.5; }
img { max-width: 100%; height: auto; vertical-align: middle; border-radius: $radius-base; }

%card {
  background-color: $color-bg-surface;
  border-radius: $radius-base;
  padding: $spacing-unit * 1.8 $spacing-unit * 2.2;
  margin-bottom: $spacing-unit * 2;
  border: 1px solid $color-border;
  transition: $transition-base;
  box-shadow: $shadow-card;
}

nav {
  background-color: rgba($color-bg-deep, 0.8);
  backdrop-filter: blur(8px);
  border-bottom: 1px solid $color-border;
  position: fixed; top: 0; left: 0; width: 100%;
  z-index: 1000; padding: $spacing-unit*0.7 0;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);

  .homepagenavbar {
    max-width: $content-max-width + 300px; margin: 0 auto;
    display: flex; justify-content: center; align-items: center;
    flex-wrap: wrap; gap: $spacing-unit; padding: 0 $spacing-unit;

    a.button {
      background-color: transparent; color: $color-text-secondary;
      padding: $spacing-unit * 0.4 $spacing-unit * 1;
      border: 1px solid transparent; border-radius: $radius-base;
      text-decoration: none; font-weight: 500; font-size: 0.95em;
      transition: $transition-base;
      letter-spacing: 0.5px;

      &:hover { color: $color-accent-green; background-color: rgba($color-accent-green, 0.1); }
      &.active { font-weight: 600; color: $color-accent-green; box-shadow: inset 0 -2px 0 $color-accent-green; border-radius: 0; }
    }
  }
  ul { display: none; }
}

%btn-base { display: inline-flex; align-items: center; justify-content: center; padding: $spacing-unit*0.6 $spacing-unit*1.5; border-radius: $radius-base; font-weight: 500; font-size: 0.95rem; text-align: center; cursor: pointer; border: 1px solid $color-accent-green; transition: $transition-base; text-decoration: none; line-height: 1.4; gap: $spacing-unit * 0.4; letter-spacing: 0.5px; &:focus { outline: none; box-shadow: $shadow-glow-focus; } &:active { transform: scale(0.97); } }
%btn-primary-green { @extend %btn-base; background-color: $color-accent-green; color: $color-bg-deep; border-color: $color-accent-green; &:hover { background-color: $color-accent-green-hover; border-color: $color-accent-green-hover; box-shadow: $shadow-glow-green; color: $color-bg-surface; } }
%btn-secondary { @extend %btn-base; background-color: $color-bg-surface-alt; color: $color-text-primary; border-color: $color-border; &:hover { background-color: lighten($color-bg-surface-alt, 5%); border-color: lighten($color-border, 5%); } }
%btn-ghost { @extend %btn-base; background-color: transparent; color: $color-text-secondary; border-color: $color-border; padding-left: $spacing-unit*0.8; padding-right: $spacing-unit*0.8; &:hover { background-color: rgba($color-text-secondary, 0.1); color: $color-text-primary; border-color: $color-text-secondary; } }
%btn-link { @extend %btn-base; background: none; border: none; color: $color-accent-green; padding: 0; text-decoration: underline; font-weight: 400; &:hover { color: $color-accent-green-hover; } }
%btn-danger-outline { @extend %btn-base; background: none; border: 1px solid $color-danger; color: $color-danger; &:hover { background-color: rgba($color-danger, 0.1); } }

.comment-btn { @extend %btn-primary-green; }
.login-container button { @extend %btn-primary-green; width: 100%; margin-top: $spacing-unit * 1.5;}
#submitButton input[type="submit"] { @extend %btn-primary-green; width: 100%; margin-top: $spacing-unit * 1.5; }
.intro-page a.flex-button { @extend %btn-primary-green; min-width: 200px; padding: $spacing-unit $spacing-unit*2; margin: $spacing-unit * 0.7; }
.post-actions .read-more, .post-actions .action-link { @extend %btn-secondary; font-size: 0.9em; padding: $spacing-unit*0.5 $spacing-unit*1; margin: 0; margin-right: $spacing-unit*0.8; }
.reply-btn, .toggle-replies-btn { @extend %btn-ghost; font-size: 0.875em; padding: $spacing-unit * 0.2 $spacing-unit * 0.8; }
.cancel-reply-btn { @extend %btn-danger-outline; font-size: 0.8em !important; padding: 1px 6px !important; border-width: 1px !important; margin-left: $spacing-unit*0.5 !important; }
.vote-btn { @extend %btn-ghost; border: 1px solid $color-border; color: $color-text-muted; width: 30px; height: 30px; padding: 0; border-radius: $radius-base; font-size: 1rem; transition: $transition-base, transform 0.15s ease; &:hover { transform: scale(1.1); background-color: $color-bg-surface-alt; } &[data-vote-type="1"]:hover { border-color: $color-success; color: $color-success; } &[data-vote-type="-1"]:hover { border-color: $color-danger; color: $color-danger; } }
a.read-more-link { @extend %btn-link; display: inline-block; margin-top: $spacing-unit * 1; font-size: 0.95em; font-weight: 500; letter-spacing: 0.3px; }


.form-container > .login-container, .contactForm form { @extend %card; padding: $spacing-unit * 2 $spacing-unit * 3; }
.form-container, .contactForm { padding: 0; }
.login-container, .contactForm form {
     label { display: block; margin-bottom: $spacing-unit * 0.5; font-weight: 500; font-size: 0.9rem; color: $color-text-secondary; letter-spacing: 0.3px; }
     input[type="text"], input[type="email"], input[type="password"], textarea { width: 100%; padding: $spacing-unit * 0.8 $spacing-unit * 1.2; border: 1px solid $color-border; border-radius: $radius-base; font-size: 1rem; margin-bottom: $spacing-unit * 1.5; transition: $transition-base; background-color: $color-bg-deep; color: $color-text-primary; font-family: $font-primary; &:focus { outline: none; border-color: $color-accent-green; box-shadow: $shadow-glow-focus; background-color: $color-bg-surface; } }
     textarea { min-height: 140px; resize: vertical; line-height: 1.6; }
     #response, .form-error, .form-success { margin-top: $spacing-unit*1.2; text-align: center; padding: $spacing-unit $spacing-unit*1.2; border-radius: $radius-base; font-size: 0.9em; border: 1px solid transparent; }
     #response.success, .form-success { background-color: rgba($color-success, 0.15); color: lighten($color-success, 10%); border-color: rgba($color-success, 0.3); }
     #response.error, .form-error { background-color: rgba($color-danger, 0.15); color: lighten($color-danger, 10%); border-color: rgba($color-danger, 0.3); }
     .form-footer-links { margin-top: $spacing-unit*2; text-align: center; font-size: 0.9em; }
}

.post-container { background: none; border: none; box-shadow: none; padding: 0; margin-bottom: $spacing-unit * 2.5;
    .post-title { font-size: 1rem; color: $color-text-muted; text-transform: uppercase; letter-spacing: 1px; margin-bottom: $spacing-unit * 1; font-weight: 500; border-bottom: 1px solid $color-border; padding-bottom: $spacing-unit*0.5; }
    .blog-post { @extend %card; box-shadow: $shadow-card; }
}
.blog-post, .blog-post-full {
     @extend %card;
     &:hover { transform: translateY(-3px); box-shadow: 0 6px 20px -4px rgba(0,0,0, 0.3), 0 3px 10px -5px rgba(0,0,0, 0.25); }
     h2, h3.post-heading { margin-bottom: $spacing-unit * 0.5; font-weight: 600; a.blog-title, & { color: $color-text-heading; text-decoration: none; } a.blog-title:hover { color: $color-accent-green; } }
     .post-meta { margin-bottom: $spacing-unit * 1.8; color: $color-text-muted; font-size: 0.85em; }
     .post-excerpt p, .post-content-full p { color: $color-text-secondary; font-family: $font-secondary; font-size: 1.05rem; line-height: 1.75; }
     .blog-post-image { border-radius: $radius-base; margin-top: $spacing-unit * 1.5; margin-bottom: $spacing-unit * 1.5; display: block; border: 1px solid $color-border; }
     .image-gallery { margin: $spacing-unit*2 0; }
}
.blog-post { border-bottom: none; padding-bottom: $spacing-unit * 2;
  &:last-child { margin-bottom: $spacing-unit * 2; padding-bottom: $spacing-unit * 2; }
   .blog-post-image { max-width: 200px; float: left; margin-right: $spacing-unit * 1.5; margin-bottom: $spacing-unit*0.5; margin-top: 5px; }
   .post-excerpt p { clear: both; padding-top: $spacing-unit*0.5; }
   a.read-more-link { clear:both; display: inline-block; margin-top: $spacing-unit*1.5; }
}
.blog-post-full {
   .blog-post-image { max-width: 100%; margin-left: auto; margin-right: auto;}
   .post-content-full { margin-top: $spacing-unit*1.5; }
}


.comments-section { margin-top: $spacing-unit * 3; border-top: 1px solid $color-border; padding-top: $spacing-unit * 2.5; h3 { margin-bottom: $spacing-unit * 2; font-size: 1.5rem; color: $color-accent-green-hover; }
  .comment-box {
     @extend %card; box-shadow: none; border-left: 3px solid $color-border; transition: border-left-color 0.3s ease, background-color 0.3s ease; padding: $spacing-unit * 1.5 $spacing-unit * 1.8; margin-bottom: $spacing-unit * 1.5; background-color: $color-bg-surface; border: 1px solid $color-border;
      &:target { border-left-color: $color-accent-green; background-color: lighten($color-bg-surface, 4%); }
     .comment-header { align-items: center; margin-bottom: $spacing-unit*0.6; .comment-username { font-weight: 600; color: $color-text-heading; font-size: 0.95rem; } .comment-time { color: $color-text-muted; font-size: 0.8em; } }
     .comment-content { font-size: 1rem; color: $color-text-secondary; white-space: pre-wrap; line-height: 1.7; font-family: $font-secondary; }
     .comment-actions { margin-top: $spacing-unit * 1.2; gap: $spacing-unit;
        .vote-section { gap: $spacing-unit * 0.6;
          span { font-size: 0.9em; font-weight: 600; color: $color-text-secondary; min-width: 15px; }
        }
     }
  }
  .nested-comments { border-left: 2px solid $color-border; padding-left: $spacing-unit * 1.8; margin-top: $spacing-unit * 1.2; margin-left: $spacing-unit * 1.2;
      & > .comment-box { background: lighten($color-bg-surface, 3%); border-color: $color-border; border-left-width: 3px; border-top: none; border-right: none; border-bottom: none; border-radius: 0 $radius-base $radius-base 0; padding: $spacing-unit * 1.2; }
  }
}

.comment-form-section { margin-top: $spacing-unit*2; border-top: 1px solid $color-border; padding-top: $spacing-unit*2.5; }
.comment-form {
    h3 { font-size: 1.4rem; font-weight: 600; margin-bottom: $spacing-unit * 1.5; color: lighten($color-accent-green, 10%); }
    textarea.comment-textarea { background-color: $color-bg-deep; border-color: $color-border; &:focus { background-color: $color-bg-surface; } }
    .reply-status { background-color: rgba($color-accent-secondary, 0.1); border-color: rgba($color-accent-secondary, 0.3); color: lighten($color-accent-secondary, 15%); strong { color: lighten($color-accent-secondary, 20%);} }
}

footer {
  text-align: center; padding: $spacing-unit * 3 $spacing-unit * 1.5; margin-top: $spacing-unit * 4;
  background-color: $color-bg-deep;
  border-top: 1px solid $color-border; color: $color-text-muted;
  .footercontainer2, .socials, .label { margin-bottom: $spacing-unit * 2;
      h3 { font-family: $font-primary; font-size: 0.8rem; color: $color-text-secondary; font-weight: 500; margin-bottom: $spacing-unit; text-transform: uppercase; letter-spacing: 1px; }
      p, a { color: $color-text-muted; font-size: 0.9rem; line-height: 1.6; &:hover { color: $color-accent-green; } }
  }
  .socials a { font-size: 1.5em; margin: 0 $spacing-unit * 0.7; transition: $transition-base; color: $color-text-muted; &:hover { color: $color-accent-green-hover; transform: scale(1.2) rotate(5deg); } }
  .copyright { margin-top: $spacing-unit * 2.5; font-size: 0.8em; opacity: 0.6; }
}

#toast {
  position: fixed; bottom: 30px; top: auto; left: 50%; background: $color-bg-surface; color: $color-text-primary; padding: $spacing-unit $spacing-unit * 2; border-radius: $radius-base; box-shadow: $shadow-card; z-index: 2000; font-family: $font-primary; font-weight: 500; transition: opacity 0.3s ease, transform 0.3s ease; opacity: 0; transform: translate(-50%, 20px); pointer-events: none; border-left: 4px solid $color-success;
  &.show { display: block; opacity: 1; transform: translate(-50%, 0); pointer-events: auto; }
  &.success { border-left-color: $color-success; }
  &.error { border-left-color: $color-danger; background-color: lighten($color-danger, 5%); color: $color-text-heading; }
}

.image-gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: $spacing-unit * 0.8; margin: $spacing-unit * 1.8 0; }
.image-preview-container { margin-top: $spacing-unit; display: flex; flex-wrap: wrap; gap: $spacing-unit*0.8; }
.image-preview-item { max-width: 80px; max-height: 80px; border: 1px solid $color-border; padding: 2px; border-radius: $radius-base; img { max-width: 100%; max-height: 100%; display: block; object-fit: cover; border-radius: 2px; } }

@media (max-width: 768px) {
  body { font-size: 15px; padding-top: 60px; }
  .main-content, .post-container, .form-container > .login-container, .contactForm, .intro-page { padding: 0 $spacing-unit; margin-top: $spacing-unit*1.5; margin-bottom: $spacing-unit*1.5; }
  h1 { font-size: 2rem; } h2 { font-size: 1.5rem; } h3 { font-size: 1.2rem; }
  nav { padding: $spacing-unit*0.6 0; .homepagenavbar { gap: $spacing-unit*0.5; padding: 0 $spacing-unit*0.5; a.button { padding: $spacing-unit*0.5 $spacing-unit*0.8; font-size: 0.9em;} } ul { display: none; } }
  .blog-post { .blog-post-image { max-width: 100%; float: none; margin: $spacing-unit auto; display: block; } .post-excerpt p { clear: none; padding-top: 0; } }
  .comments-section { .nested-comments { margin-left: $spacing-unit*0.5; padding-left: $spacing-unit; } }
  footer { padding: $spacing-unit*2 $spacing-unit*0.8; margin-top: $spacing-unit*2.5; }
}

.sr-only { border: 0 !important; clip: rect(1px, 1px, 1px, 1px) !important; -webkit-clip-path: inset(50%) !important; clip-path: inset(50%) !important; height: 1px !important; margin: -1px !important; overflow: hidden !important; padding: 0 !important; position: absolute !important; width: 1px !important; white-space: nowrap !important; }
#loading-indicator { text-align: center; padding: 20px; display: none; font-style: normal; color: $color-text-muted; font-size: 1rem; font-weight: 500; }

@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
.blog-post, .comment-box { animation: fadeIn 0.4s $transition-timing forwards; opacity: 0; animation-delay: calc(var(--animation-order, 0) * 50ms); }